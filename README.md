# 比赛选手人员分配系统
一个直观且交互性强的比赛选手人员分配系统界面，支持拖拽操作、实时统计和羁绊关系显示。

## 功能特性

### 👤 选手管理
- **新增选手**：完整的选手信息录入表单
- **信息完善**：昵称、游戏ID、群昵称、天梯分数、擅长位置、英雄池等
- **英雄选择**：支持搜索英雄名称和别称，可视化选择
- **默契关系**：可选择多个默契选手，支持搜索和关联匹配
- **实时预览**：天梯分数颜色等级实时显示

### 🏆 队伍管理
- 动态添加/删除队伍（最少保留1个队伍）
- 每个队伍显示实时天梯分数统计
- 羁绊关系自动检测和标识
- 队伍卡片响应式布局（一行3个队伍）

### 👥 选手分配
- **拖拽操作**：直接拖拽选手卡片到目标队伍
- **点击添加**：通过对话框搜索和选择选手
- **移除功能**：一键移除队员回到未分配池
- **实时更新**：队伍分数和羁绊状态动态刷新

### 🔍 搜索筛选
- 支持选手昵称、游戏ID、群昵称搜索
- 擅长位置筛选（优势路、中单、劣势路、半辅助、纯辅助、全才）
- 擅长英雄名称搜索
- 羁绊选手关联显示

### 📊 数据展示
- 选手详细信息卡片：
  - 昵称、游戏ID、群昵称
  - 天梯分数（颜色等级标识）
  - 擅长位置标签
  - 擅长英雄列表
  - 最近胜率
  - 冠军数量
  - 默契选手列表

### 💾 数据管理
- 重置分配功能
- 保存配置到JSON文件
- 导入已有配置
- 自动保存时间戳

## 安装和使用

### 系统要求
- 现代浏览器（Chrome 80+、Firefox 75+、Safari 13+、Edge 80+）
- Node.js 14+ （用于后端认证服务）
- PostgreSQL数据库（已配置）

### 快速开始

#### 方法一：完整部署（推荐，包含登录功能）
1. **安装依赖**
```bash
npm install
```

2. **启动后端服务器**
```bash
npm start
# 或
npm run server
```
后端服务器将在 `http://localhost:3000` 启动

3. **访问系统**
- 打开浏览器访问 `login.html`
- 使用默认管理员账号登录：`admin` / `admin123`
- 登录成功后自动跳转到主系统

#### 方法二：仅前端部署（无登录功能）
```bash
# 使用Python启动本地服务器
python -m http.server 8000

# 使用Node.js启动本地服务器
npx serve .

# 使用PHP启动本地服务器
php -S localhost:8000
```

### 用户管理

#### 创建新用户
```bash
# 创建用户
node create-user.js create <username> <password>

# 示例
node create-user.js create player1 password123
```

#### 管理用户
```bash
# 列出所有用户
node create-user.js list

# 删除用户
node create-user.js delete <username>
```

### 1. 初始化系统

### 2. 新增选手
- 点击"+ 新增选手"按钮打开录入表单
- 填写基本信息：昵称、游戏ID、群昵称
- 设置天梯分数（实时显示颜色等级）
- 选择擅长位置（可多选）
- 点击"选择英雄"从英雄列表中选择擅长英雄
- 点击"添加默契选手"选择相关选手
- 设置胜率和冠军数量
- 点击"创建选手"完成添加

### 3. 添加队伍
- 点击"+ 添加队伍"按钮创建新队伍
- 系统会自动分配队伍ID
- 只有多个队伍时才能删除队伍

### 4. 分配选手
**方法一：拖拽操作**
- 在未分配选手池中找到目标选手
- 点击并拖拽选手卡片
- 拖到目标队伍容器内松开

**方法二：点击添加**
- 点击队伍底部的"+ 添加选手"按钮
- 在弹出对话框中搜索或浏览选手
- 点击选手卡片完成分配

### 5. 移除选手
- 将鼠标悬停在队伍中的选手卡片上
- 点击右上角的"×"按钮
- 选手将自动返回未分配选手池

### 6. 搜索筛选
- 在搜索框输入关键词（支持昵称、ID、位置、英雄）
- 勾选位置标签进行筛选
- 系统实时显示匹配结果

### 7. 数据管理
- **重置分配**：清空所有队伍分配，选手回到未分配池
- **保存配置**：导出当前分配状态为JSON文件
- **导入数据**：加载之前保存的配置文件

## 数据结构

### 选手数据格式
```json
{
  "id": 1763026836361,
  "nickname": "选手昵称",
  "game_id": "游戏ID",
  "group_nickname": "群昵称",
  "score": 1500,
  "positions": ["优势路", "中单"],
  "heroes": ["英雄名称1", "英雄名称2"],
  "win_rate": 50,
  "championships": 3,
  "synergy_players": ["默契选手1", "默契选手2"]
}
```

### 队伍数据格式
```json
{
  "id": 1,
  "name": "队伍1",
  "players": [选手对象数组],
  "created_at": "2025-11-13T17:40:42.810172+08:00",
  "updated_at": "2025-11-13T17:40:42.810172+08:00"
}
```

## 视觉设计

### 配色方案
- **主色调**：电竞风格渐变背景（深色系）
- **强调色**：蓝色系（#3b82f6）用于主要操作
- **次要色**：灰蓝色（#94a3b8）用于次要信息
- **警告色**：红色系（#ef4444）用于删除操作
- **渐变效果**：多层次渐变背景和按钮设计

### 现代设计特性
- **毛玻璃效果**：使用 `backdrop-filter: blur()` 实现现代化UI
- **深度层次**：多层阴影和边框营造立体感
- **字体系统**：Inter字体栈，支持多语言显示
- **动画效果**：cubic-bezier缓动函数的流畅过渡
- **光效交互**：按钮悬停时的光效动画

### 响应式设计
- **Grid布局**：CSS Grid实现自适应队伍布局
- **Flexbox**：弹性盒子处理组件排列
- **断点设计**：
  - 桌面端：3列队伍布局（>1200px）
  - 平板端：2列队伍布局（768px-1200px）
  - 手机端：单列布局（<768px）
- **自适应尺寸**：容器查询和视口单位结合

### 交互反馈
- **微交互动画**：0.2s cubic-bezier过渡效果
- **悬停状态**：transform缩放和阴影变化
- **拖拽视觉**：实时视觉提示和状态反馈
- **模态框**：背景模糊和淡入淡出效果
- **按钮状态**：光效动画和状态切换

## 浏览器兼容性

- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+

## 技术栈

- **HTML5**：语义化标签
- **CSS3**：Grid布局、Flexbox、动画
- **JavaScript ES6+**：面向对象编程
- **原生DOM API**：无框架依赖

## 文件结构

```
teamlist/
├── index.html          # 主页面 - 包含完整的HTML结构和所有模态框
├── login.html          # 登录页面 - 用户认证界面
├── style.css          # 样式文件 - 现代深色游戏化风格，响应式设计
├── script.js          # 逻辑脚本 - 面向对象JavaScript，完整的系统功能
├── auth.js            # 认证脚本 - 登录、登出、会话管理
├── server.js          # 后端服务器 - Express + PostgreSQL
├── create-user.js     # 用户管理工具 - 创建、删除、列出用户
├── package.json       # 项目配置和依赖
├── database.js        # 数据库配置（已集成到server.js）
└── README.md          # 说明文档
```

### 主要文件说明

#### `index.html`
- 采用语义化HTML5标签
- 包含完整的用户界面：统计卡片、队伍管理、选手池
- 集成多个模态框：新增选手、选择英雄、添加默契选手等
- 无需外部依赖，单文件即可运行

#### `script.js` (1300+ 行)
- **面向对象设计**：使用 `TeamAssignmentSystem` 类封装所有功能
- **内置英雄列表**：包含128个Dota英雄的完整数据和别称，支持搜索和筛选
- **拖拽系统**：原生HTML5 Drag & Drop API实现
- **数据持久化**：JSON导入导出功能
- **搜索筛选**：支持多维度搜索和位置筛选
- **示例数据生成**：首次使用自动生成演示选手数据

#### `style.css` (1000+ 行)
- **现代设计**：深色游戏化风格，电竞配色方案
- **响应式布局**：Grid + Flexbox混合布局
- **交互动画**：悬停效果、过渡动画、拖拽反馈
- **毛玻璃效果**：使用backdrop-filter实现现代UI
- **渐变设计**：多层次渐变背景和卡片

## 技术栈

- **HTML5**：语义化标签
- **CSS3**：Grid布局、Flexbox、动画
- **JavaScript ES6+**：面向对象编程
- **原生DOM API**：无框架依赖

## 系统特性

### 🎮 游戏化设计
- **电竞风格界面**：深色主题配合荧光色点缀
- **动态颜色系统**：天梯分数自动显示对应颜色等级
- **流畅动画效果**：悬停、拖拽、过渡动画提升交互体验
- **响应式布局**：完美适配桌面、平板、手机设备

### 🚀 性能优化
- **纯前端实现**：无需服务器支持，即开即用
- **数据本地化**：所有数据处理在浏览器端完成
- **懒加载机制**：英雄列表按需加载，提升首屏速度
- **缓存优化**：智能数据缓存减少重复计算

### 🛡️ 可靠性
- **错误处理**：完善的异常捕获和用户提示
- **数据验证**：表单输入实时验证，防止错误数据
- **兼容性保证**：支持主流现代浏览器
- **向下兼容**：即使JavaScript禁用仍能显示基本信息

## 使用场景

### 🏆 电竞赛事组织
- **战队组建**：快速组建参赛队伍
- **选手管理**：完整的选手信息数据库
- **实力平衡**：基于天梯分数的队伍平衡算法
- **羁绊匹配**：考虑选手默契度的智能分配

### 👥 社区活动
- **线上比赛**：社区级比赛的人员分配
- **团队建设**：基于玩家特点的团队组合
- **训练赛组织**：日常训练的队伍分配
- **友谊赛安排**：休闲娱乐的玩家匹配

### 📊 数据分析
- **选手统计**：胜率、冠军数等数据分析
- **位置分布**：玩家擅长位置的可视化统计
- **英雄池分析**：英雄使用频率和偏好分析
- **协作网络**：选手默契关系的网络图展示

## 扩展开发

### 🔧 自定义配置
```javascript
// 自定义天梯分数颜色等级
const scoreColors = {
    2000: '#gray',    // 新手
    3000: '#green',   // 普通
    4000: '#blue',    // 高手
    5000: '#purple',  // 大师
    6000: '#orange',  // 传奇
    7000: '#red'      // 王者
};
```

### 📦 数据导入格式
系统支持标准的JSON格式数据导入：
- 选手数据批量导入
- 队伍配置快速恢复
- 历史记录数据迁移
- 第三方系统集成

### 🎨 主题定制
- **CSS变量系统**：轻松自定义主题色彩
- **布局模板**：可配置的布局方案
- **图标替换**：支持自定义图标库
- **字体配置**：中英文字体灵活选择

## 常见问题

### Q: 如何备份我的数据？
A: 点击"保存配置"按钮导出JSON文件，建议定期备份。

### Q: 支持哪些浏览器？
A: 推荐使用Chrome、Firefox、Safari、Edge等现代浏览器。

### Q: 数据存储在哪里？
A: 数据存储在浏览器内存中，刷新页面会重置，请及时保存。

### Q: 如何批量添加选手？
A: 目前暂不支持批量导入，可通过新增选手功能逐个添加。

### Q: 拖拽功能不生效怎么办？
A: 请检查浏览器是否支持HTML5拖拽API，或尝试刷新页面重试。

## 贡献指南

欢迎提交Issue和Pull Request来改进这个项目：

1. **Bug报告**：详细描述问题现象和复现步骤
2. **功能建议**：说明新功能的使用场景和预期效果
3. **代码贡献**：遵循现有代码风格，添加必要注释
4. **文档完善**：补充使用说明和技术文档

## 开源许可

本项目采用MIT开源许可，可自由使用、修改和分发。

## 更新日志

### v1.0.0 (2025-11-14)
- ✨ 初始版本发布
- 🏆 实现基础队伍管理功能
- 🎯 支持选手拖拽分配
- 🔍 添加搜索筛选功能
- 💾 实现数据导入导出
- 🎨 现代游戏化UI设计
- 📱 完整响应式布局
- ⚡ 高性能原生JavaScript实现
